<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
          <link rel="manifest" href="manifest.json">
    <title>Core Menu</title>
<link href="https://fonts.googleapis.com/css2?family=Arizonia&display=swap" rel="stylesheet">

    <style>
        body { 
            margin: 0; 
            padding: 0; 
            overflow: hidden; 
            background-color: #000088; 
            font-family: 'Arizonia', cursive; 
            touch-action: none;
            /* Защита от выделения и системных меню */
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-touch-callout: none;
        }
        #ui-layer { 
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            display: flex; flex-direction: column; align-items: center; justify-content: center; 
            z-index: 10; pointer-events: none; 
        }
        .logo { position: absolute; top: 10vh; max-width: 80px; height: auto; opacity: 0.9; pointer-events: none; }
        nav { display: flex; flex-direction: column; gap: 2px; text-align: center; margin-top: 106px; pointer-events: none; }
        .menu-item { 
            text-decoration: none; color: #ffffff; font-size: 28px; letter-spacing: 1px; 
            transition: transform 0.2s ease, color 0.2s ease; opacity: 0.8; 
            white-space: nowrap; pointer-events: auto; cursor: pointer; 
            text-shadow: 0 2px 4px rgba(0,0,0,0.5); 
        }
        .menu-item:hover { color: #ffeb3b; transform: scale(1.08); }
        canvas { display: block; position: absolute; top: 0; left: 0; z-index: 1; }
    </style>
</head>
<body>

    <div id="ui-layer">
        <img src="logo.png" alt="Logo" class="logo">
        <nav>
            <a href="3d.html" class="menu-item">3D</a>
            <a href="smart.html" class="menu-item">Metrics</a>
            <a href="book.html" class="menu-item">Book</a>
            <a href="flash.html" class="menu-item">Flash</a>
            <a href="orbit.html" class="menu-item">System</a>
            <a href="code.html" class="menu-item">Code</a>
            <a href="size.html" class="menu-item">Size</a>
            <a href="peer.html" class="menu-item">Peer</a>
            <a href="telegraph.html" class="menu-item">Telegraph</a>
<a href="resume.html" style="display: inline-block; margin-top: 20px;" class="menu-item">About</a>

        </nav>
    </div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three/examples/js/controls/OrbitControls.js"></script>

<script>
/* ---------- Сцена ---------- */
const scene = new THREE.Scene();
const colorStart = new THREE.Color(0x000088);
const colorEnd = new THREE.Color(0x000000);
scene.background = colorStart.clone();

/* ---------- Камера ---------- */
const camera = new THREE.PerspectiveCamera(
    75,
    window.innerWidth / window.innerHeight,
    0.1,
    1000
);
camera.position.z = 35;

/* ---------- Рендер ---------- */
const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

/* ---------- Контролы ---------- */
const controls = new THREE.OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;

/* ---------- Свет ---------- */
scene.add(new THREE.AmbientLight(0xffffff, 0.4));

const lightRed = new THREE.PointLight(0xff0000, 2.5, 150);
lightRed.position.set(20, 15, 25);
scene.add(lightRed);

const lightGreen = new THREE.PointLight(0x00ff00, 2.5, 150);
lightGreen.position.set(-20, 15, 25);
scene.add(lightGreen);

const lightBlue = new THREE.PointLight(0x0000ff, 2.5, 150);
lightBlue.position.set(0, -25, 25);
scene.add(lightBlue);

/* ---------- Параметры ---------- */
const denseObjects = [];
let previewObject = null;
let directionLine = null;
let isHolding = false;

const currentMouse = new THREE.Vector2();

const maxScale = 3.5;
const growthSpeed = 0.03;
const pulseSpeed = 0.08;

const minOpacity = 0.25;
const maxOpacity = 0.9;

/* ---------- Pointer Down ---------- */
window.addEventListener('pointerdown', (event) => {
    if (event.cancelable) event.preventDefault();

    isHolding = true;

    currentMouse.set(
        (event.clientX / window.innerWidth) * 2 - 1,
        -(event.clientY / window.innerHeight) * 2 + 1
    );

    const vector = new THREE.Vector3(currentMouse.x, currentMouse.y, 0.5);
    vector.unproject(camera);
    const dir = vector.sub(camera.position).normalize();
    const pos = camera.position.clone().add(dir.multiplyScalar(10));

    const geometry = new THREE.IcosahedronGeometry(0.5, 0);
    const material = new THREE.MeshPhongMaterial({
        color: Math.random() * 0xffffff,
        transparent: true,
        opacity: minOpacity,
        shininess: 140,
        side: THREE.DoubleSide
    });

    previewObject = new THREE.Mesh(geometry, material);
    previewObject.position.copy(pos);
    previewObject.scale.setScalar(0.3);
    previewObject.userData.direction = dir;

    scene.add(previewObject);

    /* Линия направления */
    const points = [
        camera.position.clone(),
        pos.clone()
    ];

    const lineGeometry = new THREE.BufferGeometry().setFromPoints(points);
    const lineMaterial = new THREE.LineBasicMaterial({
        transparent: true,
        opacity: 0.4
    });

    directionLine = new THREE.Line(lineGeometry, lineMaterial);
    scene.add(directionLine);
}, { passive: false });

/* ---------- Pointer Up ---------- */
window.addEventListener('pointerup', () => {
    if (!previewObject) return;

    isHolding = false;

    const scale = previewObject.scale.x;
    const speed = 0.04 + scale * 0.05;

    previewObject.userData.velocity =
        previewObject.userData.direction.clone().multiplyScalar(speed);

    denseObjects.push(previewObject);
    previewObject = null;

    if (directionLine) {
        scene.remove(directionLine);
        directionLine = null;
    }
});

/* ---------- Анимация ---------- */
const animate = () => {
    requestAnimationFrame(animate);

    /* Фон */
    const time = performance.now() * 0.0002;
    const cycle = (Math.sin(time) + 1) / 2;
    scene.background.lerpColors(colorEnd, colorStart, cycle);

    /* Запущенные объекты */
    denseObjects.forEach(obj => {
        obj.position.add(obj.userData.velocity);
        obj.userData.velocity.multiplyScalar(0.998);

        obj.rotation.x += 0.01;
        obj.rotation.y += 0.01;

        if (obj.position.length() > 65) {
            obj.userData.velocity.multiplyScalar(-1);
        }
    });

    /* Превью-объект */
    if (isHolding && previewObject) {
        let s = previewObject.scale.x;
        if (s < maxScale) s += growthSpeed;

        const pulse = Math.sin(performance.now() * 0.01) * pulseSpeed;
        const finalScale = s + pulse;

        previewObject.scale.setScalar(finalScale);

        const t = THREE.MathUtils.clamp(s / maxScale, 0, 1);
        previewObject.material.opacity =
            THREE.MathUtils.lerp(minOpacity, maxOpacity, t);

        previewObject.rotation.x += 0.03;
        previewObject.rotation.y += 0.02;

        /* Обновление линии */
        const posAttr = directionLine.geometry.attributes.position.array;
        posAttr[3] = previewObject.position.x;
        posAttr[4] = previewObject.position.y;
        posAttr[5] = previewObject.position.z;
        directionLine.geometry.attributes.position.needsUpdate = true;
    }

    controls.update();
    renderer.render(scene, camera);
};

/* ---------- Resize ---------- */
window.addEventListener('resize', () => {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
});

animate();
</script>
</body>
</html>
